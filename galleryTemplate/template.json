{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "a36f0b3d-8826-4bec-95a9-70ec6cb77713",
            "version": "KqlParameterItem/1.0",
            "name": "Subscriptions",
            "type": 6,
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "value": [
              "value::all"
            ],
            "typeSettings": {
              "additionalResourceOptions": [
                "value::1",
                "value::all"
              ],
              "includeAll": true
            }
          },
          {
            "id": "7b9badee-0be3-4b38-b532-b2657d0f5b87",
            "version": "KqlParameterItem/1.0",
            "name": "Help",
            "label": "Show Help",
            "type": 10,
            "isRequired": true,
            "typeSettings": {
              "additionalResourceOptions": []
            },
            "jsonData": "[\r\n { \"value\": \"Yes\", \"label\": \"Yes\"},\r\n { \"value\": \"No\", \"label\": \"No\", \"selected\":true },\r\n { \"value\": \"Change Log\", \"label\": \"Change Log\"}\r\n]"
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "name": "parameters - 8"
    },
    {
      "type": 1,
      "content": {
        "json": "## Azure Inventory Workbook\r\n### Change Log\r\nUse this report to analyze the the sizes of the different tables and Latency in your workspace and agents.  This report checks the overall workspace health.\r\n\r\n|Version|Description|\r\n|---|---|\r\n|v1.1.1| Initial Release - October 2020 - BY\r\n|v1.1.2| Add Filter to Workbooks and Alerting Resources tab - October 2020 \r\n|v1.1.3| Add NSG Traffic Analytics - October 2020\r\n|v1.1.4 | Fix orphaned nics query - November 2020\r\n|v1.1.5 | Fix sub with no network watcher - December 2020\r\n|v1.1.6 | Add VM Creation Date \r\n|v2.0 | Added Show Help and Change Log. For Overview: translated many additional Azure resource types. For Compute: Added VM Scale Sets, Added VM Overview tab with SQL and Availability set extensions. For PaaS: Added new Containers tab that has AKS and ACR resources, Added Windows Virtual Desktop (WVD) tab, Added Machine Learning & Artificial Intellgence tab, Added IoT tab. For Data: Added SQL Managed Instance, SQL Virtual Clusters, Synapse, ADX Clusters, Analysis Services, Data Factories. March 2021 - BY\r\n|v2.0.1 | Add Lab Accounts, AD Domain Services, Automanage Accounts and fixed WVD Details - March 2021 - BY\r\n|v2.0.2 | Added VM state on compute overview, fixed typo on change log, added colors to help file and change log, added Windows server 2022 in ARC machines tab. Feb 2022 - BY\r\n\r\n### Contribute https://github.com/scautomation/Azure-Inventory-Workbook\r\n\r\n \r\n\r\n\r\n\r\n",
        "style": "upsell"
      },
      "conditionalVisibility": {
        "parameterName": "Help",
        "comparison": "isEqualTo",
        "value": "Change Log"
      },
      "name": "text - Change Log"
    },
    {
      "type": 1,
      "content": {
        "json": "## Help File - Azure Service Names\r\nOver time Azure services have been named and renamed, a best effort has been made to translate resource provider names to their current names. Example: microsoft.operationalinsights/workspaces is currently called Log Analytics workspaces.\r\n\r\nQueries are using a combination of case() and iif() to do the translation. Resources not translated are appended with \"Not Translated: microsoft/providername\" these are then hidden from the resulting views in the query.\r\n\r\n\r\n\r\n## Missing Resources\r\n\t- This workbook relies on Azure Resource Graph. You need reader access to all resources you wish to see in this workbook.\r\n\r\n\t- comment out \"| where type !has \"Not Translated\" \" from the query to see if your particular resource shows up.\r\n\r\n\r\n\r\n### Found an issue or something not working right? Open an issue https://github.com/scautomation/Azure-Inventory-Workbook/issues\r\n",
        "style": "success"
      },
      "conditionalVisibility": {
        "parameterName": "Help",
        "comparison": "isEqualTo",
        "value": "Yes"
      },
      "name": "text - Help file"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "f321b3dd-4d96-4aa7-ac57-5ad8ce236a48",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Overview",
            "subTarget": "overview",
            "style": "link"
          },
          {
            "id": "e79a9ba1-8aca-4e4a-9df7-83123cae1627",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Compute",
            "subTarget": "compute",
            "preText": "IaaS",
            "style": "link"
          },
          {
            "id": "ed3b708b-7054-424d-b32b-49451e04d36b",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "PaaS",
            "subTarget": "paas",
            "style": "link"
          },
          {
            "id": "9bd4447c-8cac-4e8a-9f9b-bbcc99209b13",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Networking",
            "subTarget": "network",
            "style": "link"
          },
          {
            "id": "8192cd42-be72-4d18-b234-9e9fef4418dd",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Monitoring & Security",
            "subTarget": "monitor",
            "style": "link"
          },
          {
            "id": "1c2b6655-5c72-47bf-b4c6-9ea2665c07ef",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Governance",
            "subTarget": "governance",
            "style": "link"
          }
        ]
      },
      "name": "links - 6",
      "styleSettings": {
        "padding": "0 0 20px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "## NoShow - Begin Overview"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Overview"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "# Overview Azure Resources"
            },
            "name": "text - Title"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "Resources | summarize count(type)",
              "size": 4,
              "title": "Count of All Resources",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "tiles",
              "sortBy": [],
              "tileSettings": {
                "titleContent": {
                  "formatter": 1,
                  "formatOptions": {
                    "showIcon": true
                  }
                },
                "leftContent": {
                  "columnMatch": "count_type",
                  "formatter": 12,
                  "formatOptions": {
                    "showIcon": true
                  }
                },
                "showBorder": true,
                "sortOrderField": 2
              }
            },
            "name": "query - Overview Count"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources | summarize count() by location\r\n| sort by count_ desc",
              "size": 0,
              "title": "Resource Counts by Location",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "map",
              "gridSettings": {
                "sortBy": [
                  {
                    "itemKey": "count_",
                    "sortOrder": 2
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "count_",
                  "sortOrder": 2
                }
              ],
              "mapSettings": {
                "locInfo": "AzureLoc",
                "locInfoColumn": "location",
                "sizeSettings": "count_",
                "sizeAggregation": "Sum",
                "labelSettings": "location",
                "legendMetric": "count_",
                "legendAggregation": "Sum",
                "itemColorSettings": {
                  "nodeColorField": "count_",
                  "colorAggregation": "Sum",
                  "type": "heatmap",
                  "heatmapPalette": "greenRed"
                }
              }
            },
            "name": "query - Map of resources by location"
          },
          {
            "type": 1,
            "content": {
              "json": "## Subscriptions and Resource Groups"
            },
            "name": "text - Subscriptions text"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resourcecontainers \r\n| where type has \"microsoft.resources/subscriptions/resourcegroups\"\r\n| summarize Count=count(type) by type, subscriptionId | extend type = replace(@\"microsoft.resources/subscriptions/resourcegroups\", @\"Resource Groups\", type)",
              "size": 0,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "$gen_group",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": null,
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "type",
                    "formatter": 16,
                    "formatOptions": {
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "subscriptionId",
                    "formatter": 5
                  }
                ],
                "hierarchySettings": {
                  "treeType": 1,
                  "groupBy": [
                    "subscriptionId"
                  ],
                  "expandTopLevel": true
                },
                "sortBy": [
                  {
                    "itemKey": "Count",
                    "sortOrder": 2
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "Count",
                  "sortOrder": 2
                }
              ],
              "tileSettings": {
                "showBorder": false,
                "titleContent": {
                  "columnMatch": "type",
                  "formatter": 1
                },
                "leftContent": {
                  "columnMatch": "Count",
                  "formatter": 12,
                  "formatOptions": {
                    "palette": "auto"
                  },
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              }
            },
            "name": "query - Subscription Overview"
          },
          {
            "type": 1,
            "content": {
              "json": "## Resource Counts"
            },
            "name": "text - Overview Resource text"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "Resources \r\n//| extend type = case(\r\n//type contains 'microsoft.netapp/netappaccounts', 'NetApp Accounts',\r\n//type contains \"microsoft.compute\", \"Azure Compute\",\r\n//type contains \"microsoft.logic\", \"LogicApps\",\r\n//type contains 'microsoft.keyvault/vaults', \"Key Vaults\",\r\n//type contains 'microsoft.storage/storageaccounts', \"Storage Accounts\",\r\n//type contains 'microsoft.compute/availabilitysets', 'Availability Sets',\r\n//type contains 'microsoft.operationalinsights/workspaces', 'Azure Monitor Resources',\r\n//type contains 'microsoft.operationsmanagement', 'Operations Management Resources',\r\n//type contains 'microsoft.insights', 'Azure Monitor Resources',\r\n//type contains 'microsoft.desktopvirtualization/applicationgroups', 'WVD Application Groups',\r\n//type contains 'microsoft.desktopvirtualization/workspaces', 'WVD Workspaces',\r\n//type contains 'microsoft.desktopvirtualization/hostpools', 'WVD Hostpools',\r\n//type contains 'microsoft.recoveryservices/vaults', 'Backup Vaults',\r\n//type contains 'microsoft.web', 'App Services',\r\n//type contains 'microsoft.managedidentity/userassignedidentities','Managed Identities',\r\n//type contains 'microsoft.storagesync/storagesyncservices', 'Azure File Sync',\r\n//type contains 'microsoft.hybridcompute/machines', 'ARC Machines',\r\n//type contains 'Microsoft.EventHub', 'Event Hub',\r\n//type contains 'Microsoft.EventGrid', 'Event Grid',\r\n//type contains 'Microsoft.Sql', 'SQL Resources',\r\n//type contains 'Microsoft.HDInsight/clusters', 'HDInsight Clusters',\r\n//type contains 'microsoft.devtestlab', 'DevTest Labs Resources',\r\n//type contains 'microsoft.containerinstance', 'Container Instances Resources',\r\n//type contains 'microsoft.portal/dashboards', 'Azure Dashboards',\r\n//type contains 'microsoft.containerregistry/registries', 'Container Registry',\r\n//type contains 'microsoft.automation', 'Automation Resources',\r\n//type contains 'sendgrid.email/accounts', 'SendGrid Accounts',\r\n//type contains 'microsoft.datafactory/factories', 'Data Factory',\r\n//type contains 'microsoft.databricks/workspaces', 'Databricks Workspaces',\r\n//type contains 'microsoft.machinelearningservices/workspaces', 'Machine Learnings Workspaces',\r\n//type contains 'microsoft.alertsmanagement/smartdetectoralertrules', 'Azure Monitor Resources',\r\n//type contains 'microsoft.apimanagement/service', 'API Management Services',\r\n//type contains 'microsoft.dbforpostgresql', 'PostgreSQL Resources',\r\n//type contains 'microsoft.scheduler/jobcollections', 'Scheduler Job Collections',\r\n//type contains 'microsoft.visualstudio/account', 'Azure DevOps Organization',\r\n//type contains 'microsoft.network/', 'Network Resources',\r\n//type contains 'microsoft.migrate/' or type contains 'microsoft.offazure', 'Azure Migrate Resources',\r\n//type contains 'microsoft.servicebus/namespaces', 'Service Bus Namespaces',\r\n//type contains 'microsoft.classic', 'ASM Obsolete Resources',\r\n//type contains 'microsoft.resources/templatespecs', 'Template Spec Resources',\r\n//type contains 'microsoft.virtualmachineimages', 'VM Image Templates',\r\n//type contains 'microsoft.documentdb', 'CosmosDB DB Resources',\r\n//type contains 'microsoft.alertsmanagement/actionrules', 'Azure Monitor Resources',\r\n//type contains 'microsoft.kubernetes/connectedclusters', 'ARC Kubernetes Clusters',\r\n//type contains 'microsoft.purview', 'Purview Resources',\r\n//type contains 'microsoft.security', 'Security Resources',\r\n//type contains 'microsoft.cdn', 'CDN Resources',\r\n//type contains 'microsoft.devices','IoT Resources',\r\n//type contains 'microsoft.datamigration', 'Data Migraiton Services',\r\n//type contains 'microsoft.cognitiveservices', 'Congitive Services',\r\n//type contains 'microsoft.customproviders', 'Custom Providers',\r\n//type contains 'microsoft.appconfiguration', 'App Services',\r\n//type contains 'microsoft.search', 'Search Services',\r\n//type contains 'microsoft.maps', 'Maps',\r\n//type contains 'microsoft.containerservice/managedclusters', 'AKS',\r\n//type contains 'microsoft.signalrservice', 'SignalR',\r\n//type contains 'microsoft.resourcegraph/queries', 'Resource Graph Queries',\r\n//type contains 'microsoft.batch', 'MS Batch',\r\n//type contains 'microsoft.analysisservices', 'Analysis Services',\r\n//type contains 'microsoft.synapse/workspaces', 'Synapse Workspaces',\r\n//type contains 'microsoft.synapse/workspaces/sqlpools', 'Synapse SQL Pools',\r\n//type contains 'microsoft.kusto/clusters', 'ADX Clusters',\r\n//type contains 'microsoft.resources/deploymentscripts', 'Deployment Scripts',\r\n//type contains 'microsoft.aad/domainservices', 'AD Domain Services',\r\n//type contains 'microsoft.labservices/labaccounts', 'Lab Accounts',\r\n//type contains 'microsoft.automanage/accounts', 'Automanage Accounts',\r\n//type contains 'microsoft.relay/namespaces', 'Azure Relay',\r\n//type contains 'microsoft.notificationhubs/namespaces', 'Notification Hubs',\r\n//type contains 'microsoft.digitaltwins/digitaltwinsinstances', 'Digital Twins',\r\n//strcat(\"Not Translated: \", type))\r\n| summarize count() by type",
              "size": 2,
              "title": "Resource Count by Type",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subscriptions}"
              ],
              "visualization": "tiles",
              "tileSettings": {
                "titleContent": {
                  "columnMatch": "type",
                  "formatter": 16,
                  "formatOptions": {
                    "showIcon": true
                  }
                },
                "leftContent": {
                  "columnMatch": "count_",
                  "formatter": 12,
                  "formatOptions": {
                    "min": 100,
                    "max": 1000,
                    "palette": "greenRed"
                  },
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "style": "decimal",
                      "useGrouping": false,
                      "maximumFractionDigits": 2,
                      "maximumSignificantDigits": 3
                    }
                  }
                },
                "showBorder": true,
                "sortCriteriaField": "count_",
                "sortOrderField": 2
              }
            },
            "name": "query - Overview Resource Counts by type"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "overview"
      },
      "name": "group - Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "## NoShow - End Overview\r\n\r\n\r\n## NoShow - Begin Compute"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin Compute"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "a5b84469-ab4c-4b30-9983-22c454d61468",
            "cellValue": "compute",
            "linkTarget": "parameter",
            "linkLabel": "Azure Compute",
            "subTarget": "azure",
            "style": "link"
          },
          {
            "id": "d44b3ab8-d86b-4c5c-939f-273554437a4e",
            "cellValue": "compute",
            "linkTarget": "parameter",
            "linkLabel": "Hybrid Compute",
            "subTarget": "arc",
            "style": "link"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "compute"
      },
      "name": "tabs -  Compute"
    },
    {
      "type": 1,
      "content": {
        "json": "## Current VM Status"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        }
      ],
      "name": "text - Azure Compute"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources | where type == \"microsoft.compute/virtualmachines\"\r\n| extend vmState = tostring(properties.extended.instanceView.powerState.displayStatus)\r\n| extend vmState = iif(isempty(vmState), \"VM State Unknown\", (vmState))\r\n| summarize count() by vmState",
        "size": 4,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmState",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "useGrouping": false,
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        }
      ],
      "name": "query - Azure Compute Summary - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "## Count of VMs by VM Size."
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        }
      ],
      "name": "text - Azure Compute - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources | where type =~ \"microsoft.compute/virtualmachines\"\r\nor type =~ 'microsoft.compute/virtualmachinescalesets'\r\n| extend Size = case(\r\ntype contains 'microsoft.compute/virtualmachinescalesets', strcat(\"VMSS \", sku.name),\r\ntype contains 'microsoft.compute/virtualmachines', properties.hardwareProfile.vmSize,\r\n\"Size not found\")\r\n| summarize Count=count(Size) by vmSize=tostring(Size)",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        }
      ],
      "name": "query - Azure Compute Summary"
    },
    {
      "type": 1,
      "content": {
        "json": "## VMs by Storage and Networking\r\n\r\nüí° Select tab to see corresponding breakdown"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        }
      ],
      "name": "text - Azure Compute - Copy"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "d99f06e7-b625-4b75-b01c-c6cae7661d2f",
            "cellValue": "hardware",
            "linkTarget": "parameter",
            "linkLabel": "VM Scale Sets",
            "subTarget": "vmss",
            "style": "link"
          },
          {
            "id": "2c1dc7ff-d1c2-4214-9289-6ec960f405b8",
            "cellValue": "hardware",
            "linkTarget": "parameter",
            "linkLabel": "VM Overview",
            "subTarget": "overview",
            "style": "link"
          },
          {
            "id": "9ba284c0-ba39-460c-9f74-b9ae8845245c",
            "cellValue": "hardware",
            "linkTarget": "parameter",
            "linkLabel": "VM Storage",
            "subTarget": "storage",
            "style": "link"
          },
          {
            "id": "ac392a07-01a6-4727-b82b-117c529867c7",
            "cellValue": "hardware",
            "linkTarget": "parameter",
            "linkLabel": "VM Networking",
            "subTarget": "network",
            "style": "link"
          },
          {
            "id": "74bab549-0028-4018-8bf3-065b6c6fa28e",
            "cellValue": "hardware",
            "linkTarget": "parameter",
            "linkLabel": "Orphaned Disks",
            "subTarget": "orphaneddisks",
            "style": "link"
          },
          {
            "id": "a45a3005-c5b6-46a7-8873-ac1e471c51b4",
            "cellValue": "hardware",
            "linkTarget": "parameter",
            "linkLabel": "Orphaned NICs",
            "subTarget": "orphanednics",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        }
      ],
      "name": "links - Azure Compute Storage Networking Breakdown"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources \r\n| where type has 'microsoft.compute/virtualmachinescalesets'\r\n| extend Size = sku.name\r\n| extend Capacity = sku.capacity\r\n| extend UpgradeMode = properties.upgradePolicy.mode\r\n| extend OSType = properties.virtualMachineProfile.storageProfile.osDisk.osType\r\n| extend OS = properties.virtualMachineProfile.storageProfile.imageReference.offer\r\n| extend OSVersion = properties.virtualMachineProfile.storageProfile.imageReference.sku\r\n| extend OverProvision = properties.overprovision\r\n| extend ZoneBalance = properties.zoneBalance\r\n| extend Details = pack_all()\r\n| project VMSS = id, location, resourceGroup, subscriptionId, Size, Capacity, OSType, UpgradeMode, OverProvision, Details",
        "size": 2,
        "noDataMessage": "No VM Scale Sets found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "VMSS",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Size",
              "formatter": 1
            },
            {
              "columnMatch": "Capacity",
              "formatter": 1
            },
            {
              "columnMatch": "OSType",
              "formatter": 1
            },
            {
              "columnMatch": "UpgradeMode",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Manual",
                    "representation": "2",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "success",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "OverProvision",
              "formatter": 1
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            },
            {
              "columnMatch": "vmId",
              "formatter": 5
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "VMSS"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        },
        {
          "parameterName": "hardware",
          "comparison": "isEqualTo",
          "value": "vmss"
        }
      ],
      "name": "query - Azure Compute VMSS",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources \r\n| where type == \"microsoft.compute/virtualmachines\"\r\n| extend vmID = tolower(id)\r\n| extend osDiskId= tolower(tostring(properties.storageProfile.osDisk.managedDisk.id))\r\n| extend provisioningState = tostring(properties.extended.instanceView.powerState.displayStatus)\r\n        | join kind=leftouter(resources\r\n            | where type =~ 'microsoft.compute/disks'\r\n            | where properties !has 'Unattached'\r\n            | where properties has 'osType'\r\n            | project timeCreated = tostring(properties.timeCreated), OS = tostring(properties.osType), osSku = tostring(sku.name), osDiskSizeGB = toint(properties.diskSizeGB), osDiskId=tolower(tostring(id))) on osDiskId\r\n        | join kind=leftouter(resources\r\n\t\t\t| where type =~ 'microsoft.compute/availabilitysets'\r\n\t\t\t| extend VirtualMachines = array_length(properties.virtualMachines)\r\n\t\t\t| mv-expand VirtualMachine=properties.virtualMachines\r\n\t\t\t| extend FaultDomainCount = properties.platformFaultDomainCount\r\n\t\t\t| extend UpdateDomainCount = properties.platformUpdateDomainCount\r\n\t\t\t| extend vmID = tolower(VirtualMachine.id)\r\n\t\t\t| project AvailabilitySetID = id, vmID, FaultDomainCount, UpdateDomainCount ) on vmID\r\n\t\t| join kind=leftouter(resources\r\n\t\t\t| where type =~ 'microsoft.sqlvirtualmachine/sqlvirtualmachines'\r\n\t\t\t| extend SQLLicense = properties.sqlServerLicenseType\r\n\t\t\t| extend SQLImage = properties.sqlImageOffer\r\n\t\t\t| extend SQLSku = properties.sqlImageSku\r\n\t\t\t| extend SQLManagement = properties.sqlManagement\r\n\t\t\t| extend vmID = tostring(tolower(properties.virtualMachineResourceId))\r\n\t\t\t| project SQLId=id, SQLLicense, SQLImage, SQLSku, SQLManagement, vmID ) on vmID\r\n| project-away vmID1, vmID2, osDiskId1\r\n| extend Details = pack_all()\r\n| project vmID, SQLId, AvailabilitySetID, provisioningState, OS, resourceGroup, location, subscriptionId, SQLLicense, SQLImage,SQLSku, SQLManagement, FaultDomainCount, UpdateDomainCount, Details",
        "size": 2,
        "noDataMessage": "No VMs found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "vmID",
              "formatter": 5
            },
            {
              "columnMatch": "SQLId",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true,
                "customColumnWidthSetting": "20ch"
              }
            },
            {
              "columnMatch": "resourceGroup",
              "formatter": 5
            },
            {
              "columnMatch": "location",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "SQLLicense",
              "formatter": 1
            },
            {
              "columnMatch": "SQLImage",
              "formatter": 1
            },
            {
              "columnMatch": "SQLSku",
              "formatter": 1
            },
            {
              "columnMatch": "SQLManagement",
              "formatter": 1
            },
            {
              "columnMatch": "FaultDomainCount",
              "formatter": 1
            },
            {
              "columnMatch": "UpdateDomainCount",
              "formatter": 1
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            },
            {
              "columnMatch": "vmId",
              "formatter": 5
            },
            {
              "columnMatch": "timeCreated",
              "formatter": 6
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "vmID"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        },
        {
          "parameterName": "hardware",
          "comparison": "isEqualTo",
          "value": "overview"
        }
      ],
      "name": "query - Azure Compute Overview",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources \r\n| where type == \"microsoft.compute/virtualmachines\"\r\n| extend osDiskId= tolower(tostring(properties.storageProfile.osDisk.managedDisk.id))\r\n        | join kind=leftouter(resources\r\n            | where type =~ 'microsoft.compute/disks'\r\n            | where properties !has 'Unattached'\r\n            | where properties has 'osType'\r\n            | project timeCreated = tostring(properties.timeCreated), OS = tostring(properties.osType), osSku = tostring(sku.name), osDiskSizeGB = toint(properties.diskSizeGB), osDiskId=tolower(tostring(id))) on osDiskId\r\n        | join kind=leftouter(Resources\r\n            | where type =~ 'microsoft.compute/disks'\r\n            | where properties !has \"osType\"\r\n            | where properties !has 'Unattached'\r\n            | project sku = tostring(sku.name), diskSizeGB = toint(properties.diskSizeGB), id = managedBy\r\n            | summarize sum(diskSizeGB), count(sku) by id, sku) on id\r\n| project vmId=id, OS, location, resourceGroup, timeCreated,subscriptionId, osDiskId, osSku, osDiskSizeGB, DataDisksGB=sum_diskSizeGB, diskSkuCount=count_sku\r\n| sort by diskSkuCount desc",
        "size": 2,
        "noDataMessage": "No VMs found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "vmId",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "timeCreated",
              "formatter": 6
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "vmId"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        },
        {
          "parameterName": "hardware",
          "comparison": "isEqualTo",
          "value": "storage"
        }
      ],
      "name": "query - Azure Compute Disks",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources\r\n| where type =~ 'microsoft.compute/virtualmachines'\r\n| extend nics=array_length(properties.networkProfile.networkInterfaces)\r\n| mv-expand nic=properties.networkProfile.networkInterfaces\r\n| where nics == 1 or nic.properties.primary =~ 'true' or isempty(nic)\r\n| project vmId = id, vmName = name, vmSize=tostring(properties.hardwareProfile.vmSize), nicId = tostring(nic.id)\r\n\t| join kind=leftouter (\r\n \t\tResources\r\n  \t\t| where type =~ 'microsoft.network/networkinterfaces'\r\n  \t\t| extend ipConfigsCount=array_length(properties.ipConfigurations)\r\n  \t\t| mv-expand ipconfig=properties.ipConfigurations\r\n  \t\t| where ipConfigsCount == 1 or ipconfig.properties.primary =~ 'true'\r\n  \t\t| project nicId = id, privateIP= tostring(ipconfig.properties.privateIPAddress), publicIpId = tostring(ipconfig.properties.publicIPAddress.id), subscriptionId) on nicId\r\n| project-away nicId1\r\n| summarize by vmId, vmSize, nicId, privateIP, publicIpId, subscriptionId\r\n\t| join kind=leftouter (\r\n  \t\tResources\r\n  \t\t| where type =~ 'microsoft.network/publicipaddresses'\r\n  \t\t| project publicIpId = id, publicIpAddress = tostring(properties.ipAddress)) on publicIpId\r\n| project-away publicIpId1\r\n| sort by publicIpAddress desc",
        "size": 2,
        "noDataMessage": "No VMs found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "vmId",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "vmId"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        },
        {
          "parameterName": "hardware",
          "comparison": "isEqualTo",
          "value": "network"
        }
      ],
      "name": "query - Azure Compute Networking",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources  \r\n| where type contains \"microsoft.compute/disks\" \r\n| extend diskState = tostring(properties.diskState)\r\n| where managedBy == \"\" and diskState != 'ActiveSAS'\r\nor diskState == 'Unattached' and diskState != 'ActiveSAS'\r\n| project id, diskState, resourceGroup, location, subscriptionId",
        "size": 2,
        "noDataMessage": "No oprhaned disks found",
        "noDataMessageStyle": 3,
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "id"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        },
        {
          "parameterName": "hardware",
          "comparison": "isEqualTo",
          "value": "orphaneddisks"
        }
      ],
      "name": "query - Azure Compute - Orphaned Disks",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type =~ \"microsoft.network/networkinterfaces\"\r\n| join kind=leftouter (resources\r\n| where type =~ 'microsoft.network/privateendpoints'\r\n| extend nic = todynamic(properties.networkInterfaces)\r\n| mv-expand nic\r\n| project id=tostring(nic.id) ) on id\r\n| where isempty(id1)\r\n| where properties !has 'virtualmachine'\r\n| project id, resourceGroup, location, subscriptionId",
        "size": 2,
        "noDataMessage": "No orphaned nics found",
        "noDataMessageStyle": 3,
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "id"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "azure"
        },
        {
          "parameterName": "hardware",
          "comparison": "isEqualTo",
          "value": "orphanednics"
        }
      ],
      "name": "query - Azure Compute Orphaned NICs",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "where type == \"microsoft.hybridcompute/machines\"\r\n| project MachineId=id, status = properties.status, \r\n\t\t\t  LastSeen = properties.lastStatusChange, \r\n\t\t\t  FQDN = properties.machineFqdn, \r\n\t\t\t  OS = properties.osName, \r\n\t\t\t  ServerVersion = properties.osVersion\r\n| extend ServerVersion = case(\r\n    ServerVersion has '10.0.20348', 'Server 2022',\r\n    ServerVersion has '10.0.17763', 'Server 2019',\r\n    ServerVersion has '10.0.16299', 'Server 2016',\r\n    ServerVersion has '10.0.14393', 'Server 2016',\r\n    ServerVersion has '6.3.9600', 'Server 2012 R2',\r\n\tServerVersion)",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "status",
              "formatter": 1
            },
            {
              "columnMatch": "LastSeen",
              "formatter": 1
            },
            {
              "columnMatch": "FQDN",
              "formatter": 1
            },
            {
              "columnMatch": "OS",
              "formatter": 1
            },
            {
              "columnMatch": "ServerVersion",
              "formatter": 1
            }
          ]
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "vmSize",
            "formatter": 1,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "Count",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto",
              "showIcon": true
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0,
          "topContent": {
            "columnMatch": "vmSize",
            "formatter": 1
          },
          "centerContent": {
            "columnMatch": "Count",
            "formatter": 1,
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "compute"
        },
        {
          "parameterName": "compute",
          "comparison": "isEqualTo",
          "value": "arc"
        }
      ],
      "name": "query - ARC Machines Inventory"
    },
    {
      "type": 1,
      "content": {
        "json": "## NoShow - End Compute\r\n\r\n## NoShow - Begin PaaS"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Beging Networking"
    },
    {
      "type": 1,
      "content": {
        "json": "## PaaS Resources\r\n\r\nüí° Select tab to view releated resources for PaaS Services\r\n\r\n\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "paas"
      },
      "name": "text - PaaS Text",
      "styleSettings": {
        "padding": "0 0 15px 0"
      }
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "a4ee3213-3bfc-4333-b798-934e866c48de",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "Automation",
            "subTarget": "automation",
            "style": "link"
          },
          {
            "id": "c5ba791c-2cc3-4c32-8b5c-eab75cc0354c",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "Application Resources",
            "subTarget": "apps",
            "style": "link"
          },
          {
            "id": "4b819d18-9495-450b-99bd-40009f1babc7",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "Containers",
            "subTarget": "containers",
            "style": "link"
          },
          {
            "id": "ed78617d-664d-4727-87c6-91ac79010e2d",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "Data",
            "subTarget": "data",
            "style": "link"
          },
          {
            "id": "8d82d272-3094-4750-a058-9122b11ae50b",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "Events",
            "subTarget": "events",
            "style": "link"
          },
          {
            "id": "1dfce15d-7329-46ab-971a-09fc9fbc941b",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "IoT",
            "subTarget": "iot",
            "style": "link"
          },
          {
            "id": "98122f89-2281-4cee-9681-1212ee8ea496",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "ML/AI",
            "subTarget": "mlai",
            "style": "link"
          },
          {
            "id": "a4e4ea2e-4c32-4143-92bd-27473db8bc81",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "Storage and Backup",
            "subTarget": "storage",
            "style": "link"
          },
          {
            "id": "5623ad81-d28e-4b04-9d05-03197472a894",
            "cellValue": "paas",
            "linkTarget": "parameter",
            "linkLabel": "Windows Virtual Desktop",
            "subTarget": "wvd",
            "style": "link"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "paas"
      },
      "name": "links - PaaS Tabs",
      "styleSettings": {
        "padding": "0 0 15px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### Count of all Resource Types\r\n\r\n\r\n\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "paas"
      },
      "name": "text - PaaS Text - Overview",
      "styleSettings": {
        "padding": "0 0 10px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - Automation"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin Automation"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.automation'\r\n\tor type has 'microsoft.logic'\r\n\tor type has 'microsoft.web/customapis'\r\n| summarize count() by type",
        "size": 1,
        "noDataMessage": "No resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "automation"
        }
      ],
      "name": "query - PaaS - Automation Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "automation"
        }
      ],
      "name": "text - PaaS Text - Automation - Details "
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.automation'\r\n\t or type has 'microsoft.logic'\r\n\t or type has 'microsoft.web/customapis'\r\n| extend type = case(\r\n\ttype =~ 'microsoft.automation/automationaccounts', 'Automation Accounts',\r\n\ttype =~ 'microsoft.web/connections', 'LogicApp Connectors',\r\n\ttype =~ 'microsoft.web/customapis','LogicApp API Connectors',\r\n\ttype =~ 'microsoft.logic/workflows','LogicApps',\r\n    type =~ 'microsoft.logic/integrationaccounts', 'Integration Accounts',\r\n\ttype =~ 'microsoft.automation/automationaccounts/runbooks', 'Automation Runbooks',\r\n\ttype =~ 'microsoft.automation/automationaccounts/configurations', 'Automation Configurations',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend RunbookType = tostring(properties.runbookType)\r\n| extend LogicAppTrigger = properties.definition.triggers\r\n| extend LogicAppTrigger = iif(type =~ 'LogicApps', case(\r\n\tLogicAppTrigger has 'manual', tostring(LogicAppTrigger.manual.type),\r\n\tLogicAppTrigger has 'Recurrence', tostring(LogicAppTrigger.Recurrence.type),\r\n    LogicAppTrigger has 'When_an_Azure_Security_Center_Alert', 'Azure Security Center Alert',\r\n    LogicAppTrigger has 'When_an_Azure_Security_Center_Recommendation', 'Azure Security Center Recommendation',\r\n    LogicAppTrigger has 'When_a_response_to_an_Azure_Sentinel_alert', 'Azure Sentinel Alert',\r\n    LogicAppTrigger has 'When_Azure_Sentinel_incident_creation', 'Azure Sentinel Incident',\r\n\tstrcat(\"Unknown Trigger type\", LogicAppTrigger)), LogicAppTrigger)\r\n| extend State = case(\r\n\ttype =~ 'Automation Runbooks', properties.state, \r\n\ttype =~ 'LogicApps', properties.state,\r\n\ttype =~ 'Automation Accounts', properties.state,\r\n\ttype =~ 'Automation Configurations', properties.state,\r\n\t' ')\r\n| extend CreatedDate = case(\r\n\ttype =~ 'Automation Runbooks', properties.creationTime, \r\n\ttype =~ 'LogicApps', properties.createdTime,\r\n\ttype =~ 'Automation Accounts', properties.creationTime,\r\n\ttype =~ 'Automation Configurations', properties.creationTime,\r\n\t' ')\r\n| extend LastModified = case(\r\n\ttype =~ 'Automation Runbooks', properties.lastModifiedTime, \r\n\ttype =~ 'LogicApps', properties.changedTime,\r\n\ttype =~ 'Automation Accounts', properties.lastModifiedTime,\r\n\ttype =~ 'Automation Configurations', properties.lastModifiedTime,\r\n\t' ')\r\n| extend Details = pack_all()\r\n| project Resource=id, subscriptionId, type, resourceGroup, RunbookType, LogicAppTrigger, State, Details",
        "size": 2,
        "noDataMessage": "No resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "type",
          "sortOrderField": 1
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "automation"
        }
      ],
      "name": "query - PaaS - Automation Detailed",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - Automation"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End - PaaS - Automation"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - Apps"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin Automation"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.web'\r\n\t or type =~ 'microsoft.apimanagement/service'\r\n\t or type =~ 'microsoft.network/frontdoors'\r\n\t or type =~ 'microsoft.network/applicationgateways'\r\n\t or type =~ 'microsoft.appconfiguration/configurationstores'\r\n| summarize count() by type",
        "size": 1,
        "noDataMessage": "No resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "apps"
        }
      ],
      "name": "query - PaaS - Apps Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "apps"
        }
      ],
      "name": "text - PaaS Text - App Services Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.web'\r\n\t or type =~ 'microsoft.apimanagement/service'\r\n\t or type =~ 'microsoft.network/frontdoors'\r\n\t or type =~ 'microsoft.network/applicationgateways'\r\n\t or type =~ 'microsoft.appconfiguration/configurationstores'\r\n| extend type = case(\r\n\ttype == 'microsoft.web/serverfarms', strcat(\"App Service Plans - \", properties.kind),\r\n\tkind == 'functionapp', \"Azure Functions\", \r\n\tkind == \"api\", \"API Apps\", \r\n\ttype == 'microsoft.web/sites', \"App Services\",\r\n\ttype =~ 'microsoft.network/applicationgateways', 'App Gateways',\r\n\ttype =~ 'microsoft.network/frontdoors', 'Front Door',\r\n\ttype =~ 'microsoft.apimanagement/service', 'API Management',\r\n\ttype =~ 'microsoft.web/certificates', 'App Certificates',\r\n\ttype =~ 'microsoft.appconfiguration/configurationstores', 'App Config Stores',\r\n    type =~ 'microsoft.web/connections', 'API Connections',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend Sku = case(\r\n\ttype =~ 'App Gateways', properties.sku.name, \r\n\ttype =~ 'Azure Functions', properties.sku,\r\n\ttype =~ 'API Management', sku.name,\r\n\ttype =~ 'App Service Plans', sku.name,\r\n\ttype =~ 'App Services', properties.sku,\r\n\ttype =~ 'App Config Stores', sku.name,\r\n\t' ')\r\n| extend SiteCount = case(\r\n\ttype contains 'App Service Plans', properties.numberOfSites,\r\n    ' ')\r\n| extend State = case(\r\n\ttype =~ 'App Config Stores', properties.provisioningState,\r\n\ttype contains 'App Service Plans', properties.status,\r\n\ttype =~ 'Azure Functions', properties.enabled,\r\n\ttype =~ 'App Services', properties.state,\r\n\ttype =~ 'API Management', properties.provisioningState,\r\n\ttype =~ 'App Gateways', properties.provisioningState,\r\n\ttype =~ 'Front Door', properties.provisioningState,\r\n\t' ')\r\n| mv-expand publicIpId=properties.frontendIPConfigurations\r\n| mv-expand publicIpId = publicIpId.properties.publicIPAddress.id\r\n| extend publicIpId = tostring(publicIpId)\r\n\t| join kind=leftouter(\r\n\t  \tResources\r\n  \t\t| where type =~ 'microsoft.network/publicipaddresses'\r\n  \t\t| project publicIpId = id, publicIpAddress = tostring(properties.ipAddress)) on publicIpId\r\n| extend PublicIP = case(\r\n\ttype =~ 'API Management', properties.publicIPAddresses,\r\n\ttype =~ 'App Gateways', publicIpAddress,\r\n\t' ')\r\n| extend Details = pack_all()\r\n| project Resource=id, type, subscriptionId, Sku, State, SiteCount, PublicIP, Details",
        "size": 2,
        "noDataMessage": "No resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "type",
          "sortOrderField": 1
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "apps"
        }
      ],
      "name": "query - PaaS - Apps Detailed",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - Apps"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - Apps"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - Events"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin PaaS - Events"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.servicebus'\r\n\tor type has 'microsoft.eventhub'\r\n\tor type has 'microsoft.eventgrid'\r\n\tor type has 'microsoft.relay'\r\n| summarize count() by type",
        "size": 1,
        "noDataMessage": "No resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "events"
        }
      ],
      "name": "query - PaaS - Events Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "events"
        }
      ],
      "name": "text - PaaS Text - Events - Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.servicebus'\r\n\tor type has 'microsoft.eventhub'\r\n\tor type has 'microsoft.eventgrid'\r\n\tor type has 'microsoft.relay'\r\n| extend type = case(\r\n\ttype == 'microsoft.eventgrid/systemtopics', \"EventGrid System Topics\",\r\n\ttype =~ \"microsoft.eventgrid/topics\", \"EventGrid Topics\",\r\n\ttype =~ 'microsoft.eventhub/namespaces', \"EventHub Namespaces\",\r\n\ttype =~ 'microsoft.servicebus/namespaces', 'ServiceBus Namespaces',\r\n\ttype =~ 'microsoft.relay/namespaces', 'Relays',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend Sku = case(\r\n\ttype =~ 'Relays', sku.name, \r\n\ttype =~ 'EventGrid System Topics', properties.sku,\r\n\ttype =~ 'EventGrid Topics', sku.name,\r\n\ttype =~ 'EventHub Namespaces', sku.name,\r\n\ttype =~ 'ServiceBus Namespaces', sku.sku,\r\n\t' ')\r\n| extend Endpoint = case(\r\n\ttype =~ 'Relays', properties.serviceBusEndpoint,\r\n\ttype =~ 'EventGrid Topics', properties.endpoint,\r\n\ttype =~ 'EventHub Namespaces', properties.serviceBusEndpoint,\r\n\ttype =~ 'ServiceBus Namespaces', properties.serviceBusEndpoint,\r\n\t' ')\r\n| extend Status = case(\r\n\ttype =~ 'Relays', properties.provisioningState,\r\n\ttype =~ 'EventGrid System Topics', properties.provisioningState,\r\n\ttype =~ 'EventGrid Topics', properties.publicNetworkAccess,\r\n\ttype =~ 'EventHub Namespaces', properties.status,\r\n\ttype =~ 'ServiceBus Namespaces', properties.status,\r\n\t' ')\r\n| extend Details = pack_all()\r\n| project Resource=id, type, subscriptionId, resourceGroup, Sku, Status, Endpoint, Details",
        "size": 2,
        "noDataMessage": "No resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "type",
          "sortOrderField": 1
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "events"
        }
      ],
      "name": "query - PaaS - Events Detailed",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - Events"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - Events"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - Data"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin PaaS - Data"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources \r\n| where type has 'microsoft.documentdb'\r\n\tor type has 'microsoft.sql'\r\n\tor type has 'microsoft.dbformysql'\r\n\tor type has 'microsoft.sql'\r\n    or type has 'microsoft.purview'\r\n    or type has 'microsoft.datafactory'\r\n\tor type has 'microsoft.analysisservices'\r\n\tor type has 'microsoft.datamigration'\r\n\tor type has 'microsoft.synapse'\r\n\tor type has 'microsoft.datafactory'\r\n\tor type has 'microsoft.kusto'\r\n    or type has 'microsoft.dbforpostgresql'\r\n    or type has 'microsoft.digitaltwins'\r\n| summarize count() by type",
        "size": 1,
        "noDataMessage": "No resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "data"
        }
      ],
      "name": "query - PaaS - Data Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "data"
        }
      ],
      "name": "text - PaaS Text - Data - Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources \r\n| where type has 'microsoft.documentdb'\r\n\tor type has 'microsoft.sql'\r\n\tor type has 'microsoft.dbformysql'\r\n    or type has 'microsoft.purview'\r\n    or type has 'microsoft.datafactory'\r\n\tor type has 'microsoft.analysisservices'\r\n\tor type has 'microsoft.datamigration'\r\n\tor type has 'microsoft.synapse'\r\n\tor type has 'microsoft.datafactory'\r\n\tor type has 'microsoft.kusto'\r\n    or type has 'microsoft.dbforpostgresql'\r\n    or type has 'microsoft.digitaltwins'\r\n| extend type = case(\r\n\ttype =~ 'microsoft.documentdb/databaseaccounts', 'CosmosDB',\r\n\ttype =~ 'microsoft.sql/servers/databases', 'SQL DBs',\r\n\ttype =~ 'microsoft.dbformysql/servers', 'MySQL',\r\n\ttype =~ 'microsoft.sql/servers', 'SQL Servers',\r\n    type =~ 'microsoft.purview/accounts', 'Purview Accounts',\r\n\ttype =~ 'microsoft.synapse/workspaces/sqlpools', 'Synapse SQL Pools',\r\n\ttype =~ 'microsoft.kusto/clusters', 'ADX Clusters',\r\n\ttype =~ 'microsoft.datafactory/factories', 'Data Factories',\r\n\ttype =~ 'microsoft.synapse/workspaces', 'Synapse Workspaces',\r\n\ttype =~ 'microsoft.analysisservices/servers', 'Analysis Services Servers',\r\n\ttype =~ 'microsoft.datamigration/services', 'DB Migration Service',\r\n\ttype =~ 'microsoft.sql/managedinstances/databases', 'Managed Instance DBs',\r\n\ttype =~ 'microsoft.sql/managedinstances', 'Managed Instnace',\r\n\ttype =~ 'microsoft.datamigration/services/projects', 'Data Migration Projects',\r\n\ttype =~ 'microsoft.sql/virtualclusters', 'SQL Virtual Clusters',\r\n    type =~ 'microsoft.dbforpostgresql/servers', 'PostgreSQL DBs',\r\n    type =~ 'microsoft.digitaltwins/digitaltwinsinstances', 'Digital Twins',\r\n    strcat(\"Not Translated: \", type))\r\n| extend Sku = case(\r\n\ttype =~ 'CosmosDB', properties.databaseAccountOfferType,\r\n\ttype =~ 'SQL DBs', iif(sku.name == \"Standard\",\r\n        strcat(sku.name, \" \", properties.requestedServiceObjectiveName, \" - \", sku.capacity)\r\n        , sku.name),\r\n\ttype =~ 'MySQL', sku.name,\r\n\ttype =~ 'ADX Clusters', sku.name,\r\n\ttype =~ 'Purview Accounts', sku.name,\r\n    type =~ 'PostgreSQL DBs', strcat(sku.tier, ', ', sku.family),\r\n\t' ')\r\n| extend Status = case(\r\n\ttype =~ 'CosmosDB', properties.provisioningState,\r\n\ttype =~ 'SQL DBs', properties.status,\r\n\ttype =~ 'MySQL', properties.userVisibleState,\r\n\ttype =~ 'Managed Instance DBs', properties.status,\r\n\t' ')\r\n| extend Endpoint = case(\r\n\ttype =~ 'MySQL', properties.fullyQualifiedDomainName,\r\n\ttype =~ 'SQL Servers', properties.fullyQualifiedDomainName,\r\n\ttype =~ 'CosmosDB', properties.documentEndpoint,\r\n\ttype =~ 'ADX Clusters', properties.uri,\r\n\ttype =~ 'Purview Accounts', properties.endpoints,\r\n\ttype =~ 'Synapse Workspaces', properties.connectivityEndpoints,\r\n\ttype =~ 'Synapse SQL Pools', sku.name,\r\n\t' ')\r\n| extend Tier = sku.tier\r\n| extend License = properties.licenseType\r\n| extend maxSizeGB = todouble(case(\r\n\ttype =~ 'SQL DBs', properties.maxSizeBytes,\r\n\ttype =~ 'MySQL', properties.storageProfile.storageMB,\r\n\ttype =~ 'Synapse SQL Pools', properties.maxSizeBytes,\r\n\t' '))\r\n| extend maxSizeGB = case(\r\n\t\ttype has 'SQL DBs', maxSizeGB /1000 /1000 /1000,\r\n\t\ttype has 'Synapse SQL Pools', maxSizeGB /1000 /1000 /1000,\r\n\t\ttype has 'MySQL', maxSizeGB /1000,\r\n\t\tmaxSizeGB)\r\n| extend Details = pack_all()\r\n| project Resource=id, resourceGroup, subscriptionId, type, Sku, Tier, Status, Endpoint, maxSizeGB, Details\r\n\r\n",
        "size": 2,
        "noDataMessage": "No resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Tier",
              "formatter": 1
            },
            {
              "columnMatch": "maxSizeGB",
              "formatter": 0,
              "numberFormat": {
                "unit": 5,
                "options": {
                  "style": "decimal",
                  "useGrouping": false
                }
              }
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "type",
          "sortOrderField": 1
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "data"
        }
      ],
      "name": "query - PaaS - Data Detailed",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - Data"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - Data"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - Storage"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin PaaS - Storage"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources \r\n| where type =~ 'microsoft.storagesync/storagesyncservices'\r\n\tor type =~ 'microsoft.recoveryservices/vaults'\r\n\tor type =~ 'microsoft.storage/storageaccounts'\r\n\tor type =~ 'microsoft.keyvault/vaults'\r\n| summarize count() by type",
        "size": 1,
        "noDataMessage": "No resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "storage"
        }
      ],
      "name": "query - PaaS - Data Overview "
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "storage"
        }
      ],
      "name": "text - PaaS Text - Storage - Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources \r\n| where type =~ 'microsoft.storagesync/storagesyncservices'\r\n\tor type =~ 'microsoft.recoveryservices/vaults'\r\n\tor type =~ 'microsoft.storage/storageaccounts'\r\n\tor type =~ 'microsoft.keyvault/vaults'\r\n| extend type = case(\r\n\ttype =~ 'microsoft.storagesync/storagesyncservices', 'Azure File Sync',\r\n\ttype =~ 'microsoft.recoveryservices/vaults', 'Azure Backup',\r\n\ttype =~ 'microsoft.storage/storageaccounts', 'Storage Accounts',\r\n\ttype =~ 'microsoft.keyvault/vaults', 'Key Vaults',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend Sku = case(\r\n\ttype !has 'Key Vaults', sku.name,\r\n\ttype =~ 'Key Vaults', properties.sku.name,\r\n\t' ')\r\n| extend Details = pack_all()\r\n| project Resource=id, type, kind, subscriptionId, resourceGroup, Sku, Details",
        "size": 2,
        "noDataMessage": "No resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "storage"
        }
      ],
      "name": "query - PaaS - Data Detailed",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - Storage"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - Storage - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - Containers"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin PaaS - Containers"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type =~ 'microsoft.containerservice/managedclusters'\r\n\tor type =~ 'microsoft.containerregistry/registries'\r\n\tor type =~ 'microsoft.containerinstance/containergroups'\r\n| summarize count() by type\t",
        "size": 1,
        "noDataMessage": "No Container resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "containers"
        }
      ],
      "name": "query - PaaS - Containers Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "containers"
        }
      ],
      "name": "text - PaaS Text - Containers - Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type =~ 'microsoft.containerservice/managedclusters'\r\n\tor type =~ 'microsoft.containerregistry/registries'\r\n\tor type =~ 'microsoft.containerinstance/containergroups'\r\n| extend type = case(\r\n\ttype =~ 'microsoft.containerservice/managedclusters', 'AKS',\r\n\ttype =~ 'microsoft.containerregistry/registries', 'Container Registry',\r\n\ttype =~ 'microsoft.containerinstance/containergroups', 'Container Instnaces',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend Tier = sku.tier\r\n| extend sku = sku.name\r\n| extend State = case(\r\n\ttype =~ 'Container Registry', properties.provisioningState,\r\n\ttype =~ 'Container Instance', properties.instanceView.state,\r\n\tproperties.powerState.code)\r\n| extend Containers = properties.containers\r\n| mvexpand Containers\r\n| extend RestartCount = Containers.properties.instanceView.restartCount\r\n| extend Image = Containers.properties.image\r\n| extend RestartPolicy = properties.restartPolicy\r\n| extend IP = properties.ipAddress.ip\r\n| extend Version = properties.kubernetesVersion\r\n| extend AgentProfiles = properties.agentPoolProfiles\r\n| mvexpand AgentProfiles\r\n| extend NodeCount = AgentProfiles.[\"count\"]\r\n| extend Details = pack_all()\r\n| project id, type, location, resourceGroup, subscriptionId, sku, Tier, State, RestartCount, Version, NodeCount, Details",
        "size": 2,
        "noDataMessage": "No Container resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "sku",
              "formatter": 1
            },
            {
              "columnMatch": "Tier",
              "formatter": 1
            },
            {
              "columnMatch": "State",
              "formatter": 1
            },
            {
              "columnMatch": "RestartCount",
              "formatter": 1
            },
            {
              "columnMatch": "Version",
              "formatter": 1
            },
            {
              "columnMatch": "NodeCount",
              "formatter": 1
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "id"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "containers"
        }
      ],
      "name": "query - PaaS - Containers Detailed ",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - Containers"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - Containers"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - ML/AI"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin PaaS - ML/AI"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type =~ 'Microsoft.MachineLearningServices/workspaces'\r\n\tor type =~ 'microsoft.cognitiveservices/accounts'\r\n| summarize count() by type\t",
        "size": 1,
        "noDataMessage": "No ML/AI resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "mlai"
        }
      ],
      "name": "query - PaaS - MLAI Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "mlai"
        }
      ],
      "name": "text - PaaS Text - ML/AI - Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type =~ 'Microsoft.MachineLearningServices/workspaces'\r\n\tor type =~ 'microsoft.cognitiveservices/accounts'\r\n| extend type = case(\r\n\ttype =~ 'Microsoft.MachineLearningServices/workspaces', 'ML Workspaces',\r\n\ttype =~ 'microsoft.cognitiveservices/accounts', 'Cognitive Services',\r\n\tstrcat(\"Not Translated: \", type))\r\n| where type !has \"Not Translated\"\r\n| extend Tier = sku.tier\r\n| extend sku = sku.name\r\n| extend Endpoint = case(\r\n\ttype =~ 'ML Workspaces', properties.discoveryUrl,\r\n\ttype =~ 'Cognitive Services', properties.endpoint,\r\n\t' ')\r\n| extend Capabilities = properties.capabilities\r\n| mvexpand Capabilities\r\n| extend Capabilities.value\r\n| extend Storage = properties.storageAccount\r\n| extend AppInsights = properties.applicationInsights\r\n| extend Details = pack_all()\r\n| project id, type, location, resourceGroup, subscriptionId, sku, Tier, Endpoint, Capabilities_value, Storage, AppInsights, Details",
        "size": 2,
        "noDataMessage": "No ML/AI resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "sku",
              "formatter": 1
            },
            {
              "columnMatch": "Tier",
              "formatter": 1
            },
            {
              "columnMatch": "Capabilities_value",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkIsContextBlade": true,
                "customColumnWidthSetting": "20ch"
              }
            },
            {
              "columnMatch": "Storage",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "AppInsights",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            },
            {
              "columnMatch": "State",
              "formatter": 1
            },
            {
              "columnMatch": "RestartCount",
              "formatter": 1
            },
            {
              "columnMatch": "Version",
              "formatter": 1
            },
            {
              "columnMatch": "NodeCount",
              "formatter": 1
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "id"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "mlai"
        }
      ],
      "name": "query - PaaS - MLAI Detailed ",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - ML/AI"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - ML/AI"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - IoT"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin PaaS - IoT"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type =~ 'microsoft.devices/iothubs'\r\n\tor type =~ 'microsoft.iotcentral/iotapps'\r\n\tor type =~ 'microsoft.security/iotsecuritysolutions'\r\n| summarize count() by type",
        "size": 1,
        "noDataMessage": "No IoT resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "iot"
        }
      ],
      "name": "query - PaaS - IoT Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "iot"
        }
      ],
      "name": "text - PaaS Text - IoT - Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type =~ 'microsoft.devices/iothubs'\r\n\tor type =~ 'microsoft.iotcentral/iotapps'\r\n\tor type =~ 'microsoft.security/iotsecuritysolutions'\r\n| extend type = case (\r\n\ttype =~ 'microsoft.devices/iothubs', 'IoT Hubs',\r\n\ttype =~ 'microsoft.iotcentral/iotapps', 'IoT Apps',\r\n\ttype =~ 'microsoft.security/iotsecuritysolutions', 'IoT Security',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend Tier = sku.tier\r\n| extend sku = sku.name\r\n| extend State = properties.state\r\n| extend HostName = properties.hostName\r\n| extend EventHubEndPoint = properties.eventHubEndpoints.events.endpoint\r\n| extend Details = pack_all()\r\n| project id, type, location, resourceGroup, subscriptionId, sku, Tier, State, HostName, EventHubEndPoint, Details",
        "size": 2,
        "noDataMessage": "No IoT resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "sku",
              "formatter": 1
            },
            {
              "columnMatch": "Tier",
              "formatter": 1
            },
            {
              "columnMatch": "Capabilities_value",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkIsContextBlade": true,
                "customColumnWidthSetting": "20ch"
              }
            },
            {
              "columnMatch": "Storage",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "AppInsights",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            },
            {
              "columnMatch": "State",
              "formatter": 1
            },
            {
              "columnMatch": "RestartCount",
              "formatter": 1
            },
            {
              "columnMatch": "Version",
              "formatter": 1
            },
            {
              "columnMatch": "NodeCount",
              "formatter": 1
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "id"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "iot"
        }
      ],
      "name": "query - PaaS - IoT Detailed ",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - IoT"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - IoT"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin PaaS - WVD"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Begin PaaS - WVD - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.desktopvirtualization'\r\n| summarize count() by type",
        "size": 1,
        "noDataMessage": "No WVD Resources found",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            }
          ],
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "type",
          "sortOrderField": 1
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "wvd"
        }
      ],
      "name": "query - PaaS - WVD Overview "
    },
    {
      "type": 1,
      "content": {
        "json": "### Detailed View\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "wvd"
        }
      ],
      "name": "text - PaaS Text - WVD - Details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.desktopvirtualization'\r\n| extend type = case(\r\n\ttype =~ 'microsoft.desktopvirtualization/applicationgroups', 'WVD App Groups',\r\n\ttype =~ 'microsoft.desktopvirtualization/hostpools', 'WVD Host Pools',\r\n\ttype =~ 'microsoft.desktopvirtualization/workspaces', 'WVD Workspaces',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend Details = pack_all()\r\n| project id, type, resourceGroup, subscriptionId, kind, location, Details",
        "size": 2,
        "noDataMessage": "No WVD resources found",
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "id"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "paas"
        },
        {
          "parameterName": "paas",
          "comparison": "isEqualTo",
          "value": "wvd"
        }
      ],
      "name": "query - PaaS - WVD Detailed",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End PaaS - WVD"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow End PaaS - WVD - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "## End PaaS\r\n\r\n\r\n## Begin Networking"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow Monitoring Security"
    },
    {
      "type": 1,
      "content": {
        "json": "## Networking Overview"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "network"
      },
      "name": "text - Networking Overview"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "where type has \"microsoft.network\"\r\n    or type has 'microsoft.cdn'\r\n| summarize count() by type",
        "size": 2,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "network"
      },
      "name": "query - Networking Summary"
    },
    {
      "type": 1,
      "content": {
        "json": "## Networking Details\r\n\r\nüí° select tab to view NSG Details\r\n\r\nüí° select 'View Details' to see full return from Azure Resource Graph"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "network"
      },
      "name": "text - Neworking Details"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "5e8a9d46-8041-44fe-96a2-3a606143b199",
            "cellValue": "network",
            "linkTarget": "parameter",
            "linkLabel": "NSG",
            "subTarget": "nsg",
            "style": "link"
          },
          {
            "id": "11426c5c-1edb-41a5-bb7f-fbfb8bbc4bba",
            "cellValue": "network",
            "linkTarget": "parameter",
            "linkLabel": "Unassociated NSGs",
            "subTarget": "blanknsgs",
            "style": "link"
          },
          {
            "id": "5c167305-3eff-4612-a28a-8be527307914",
            "cellValue": "network",
            "linkTarget": "parameter",
            "linkLabel": "NSG Rules",
            "subTarget": "nsgrules",
            "style": "link"
          },
          {
            "id": "64e6b4a1-aaed-45bf-bae8-39710cfea94e",
            "cellValue": "network",
            "linkTarget": "parameter",
            "linkLabel": "IP Inventory",
            "subTarget": "ipinventory",
            "style": "link"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "network"
      },
      "name": "links - Networking Details - Tabs"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources\r\n| where type =~ 'microsoft.network/networksecuritygroups' and isnull(properties.networkInterfaces) and isnull(properties.subnets)\r\n| project Resource=id, resourceGroup, subscriptionId, location",
        "size": 0,
        "noDataMessage": "No Unassociated NSGs Found",
        "noDataMessageStyle": 3,
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "network"
        },
        {
          "parameterName": "network",
          "comparison": "isEqualTo",
          "value": "blanknsgs"
        }
      ],
      "name": "query - Networking Details - Unassociated NSGs",
      "styleSettings": {
        "padding": "0 0 100px 0"
      }
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources\r\n    | where type =~ 'microsoft.network/networksecuritygroups'\r\n    | project id, nsgRules = parse_json(parse_json(properties).securityRules), networksecurityGroupName = name, subscriptionId, resourceGroup , location\r\n    | mvexpand nsgRule = nsgRules\r\n    | project id, location, access=nsgRule.properties.access,protocol=nsgRule.properties.protocol ,direction=nsgRule.properties.direction,provisioningState= nsgRule.properties.provisioningState ,priority=nsgRule.properties.priority, \r\n        sourceAddressPrefix = nsgRule.properties.sourceAddressPrefix, \r\n        sourceAddressPrefixes = nsgRule.properties.sourceAddressPrefixes,\r\n        destinationAddressPrefix = nsgRule.properties.destinationAddressPrefix, \r\n        destinationAddressPrefixes = nsgRule.properties.destinationAddressPrefixes, \r\n        networksecurityGroupName, networksecurityRuleName = tostring(nsgRule.name), \r\n        subscriptionId, resourceGroup,\r\n        destinationPortRanges = nsgRule.properties.destinationPortRanges,\r\n        destinationPortRange = nsgRule.properties.destinationPortRange,\r\n        sourcePortRanges = nsgRule.properties.sourcePortRanges,\r\n        sourcePortRange = nsgRule.properties.sourcePortRange\r\n| extend Details = pack_all()\r\n| project id, location, access, direction, subscriptionId, resourceGroup, Details",
        "size": 2,
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "resourceGroup",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "24.1429ch"
              }
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "id"
          }
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "network"
        },
        {
          "parameterName": "network",
          "comparison": "isEqualTo",
          "value": "nsgrules"
        }
      ],
      "name": "query - Networking Details - NSG Rules",
      "styleSettings": {
        "padding": "0 0 200px 0"
      }
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "parameters": [
          {
            "id": "2a6c17b5-ef20-4ca7-a6f4-00901eb54ed1",
            "version": "KqlParameterItem/1.0",
            "name": "nsgWithTrafficAnalytics",
            "label": "NSG With Flow Logs and Traffic Analytics",
            "type": 1,
            "query": "Resources\n| where type =~ 'Microsoft.Network/networkWatchers/flowlogs'\n| extend provisioningState = parse_json(properties).provisioningState \n| extend workspaceResourceId = tostring(parse_json(parse_json(parse_json(properties).flowAnalyticsConfiguration).networkWatcherFlowAnalyticsConfiguration).workspaceResourceId)\n| extend targetResourceId = iff(notempty(workspaceResourceId) and provisioningState == \"Succeeded\", tostring(parse_json(properties).targetResourceId), \"null\" ) \n| distinct targetResourceId\n",
            "crossComponentResources": [
              "{Subscriptions}"
            ],
            "isHiddenWhenLocked": true,
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources"
          },
          {
            "version": "KqlParameterItem/1.0",
            "name": "nsgWithFlowLogs",
            "label": "NSG With Flow Logs",
            "type": 1,
            "query": "Resources\n| where type =~ 'Microsoft.Network/networkWatchers/flowlogs'\n| extend provisioningState = parse_json(properties).provisioningState \n| extend targetResourceId = iff(provisioningState == \"Succeeded\", tostring(parse_json(properties).targetResourceId), \"null\" ) \n| distinct targetResourceId\n",
            "crossComponentResources": [
              "{Subscriptions}"
            ],
            "isHiddenWhenLocked": true,
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources",
            "id": "c8a786fc-40ff-4594-83b5-6952c6928523"
          }
        ],
        "style": "above",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "network"
        },
        {
          "parameterName": "network",
          "comparison": "isEqualTo",
          "value": "nsgrules"
        }
      ],
      "name": "query - Networking Details - NSG with Flow Logs and Traffic Analytics"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources\r\n| where type =~ 'microsoft.network/networksecuritygroups'\r\n| extend flowLogs = \"{nsgWithFlowLogs}\" has id\r\n| extend trafficAnalytics = \"{nsgWithTrafficAnalytics}\" has id\r\n| project subscriptionId, ['Resource group'] = strcat('/subscriptions/', subscriptionId, '/resourceGroups/', resourceGroup), ['Network Security Group'] = id, [\"Location\"]=location, [\"Flow Logs\"]=flowLogs, [\"Traffic Analytics\"]=trafficAnalytics\r\n\r\n",
        "size": 2,
        "title": "Network Security Groups",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5,
              "formatOptions": {
                "linkTarget": "Resource"
              }
            },
            {
              "columnMatch": "Resource group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Network Security Group",
              "formatter": 5
            },
            {
              "columnMatch": "Flow Logs",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "1",
                    "representation": "success",
                    "text": "Enabled"
                  },
                  {
                    "operator": "==",
                    "thresholdValue": "0",
                    "representation": "disabled",
                    "text": "Disabled"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "unknown",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "Traffic Analytics",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "1",
                    "representation": "success",
                    "text": "Enabled"
                  },
                  {
                    "operator": "==",
                    "thresholdValue": "0",
                    "representation": "disabled",
                    "text": "Disabled"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "unknown",
                    "text": "unknown"
                  }
                ]
              }
            },
            {
              "columnMatch": "Subscription",
              "formatter": 5,
              "formatOptions": {
                "linkTarget": "Resource"
              }
            },
            {
              "columnMatch": "Flow logs",
              "formatter": 11,
              "numberFormat": {
                "unit": 0,
                "options": {
                  "style": "decimal",
                  "useGrouping": false
                }
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Network Security Group"
          }
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "network"
        },
        {
          "parameterName": "network",
          "comparison": "isEqualTo",
          "value": "nsg"
        }
      ],
      "name": "Network Security Groups"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| join kind=leftouter(\r\n    ResourceContainers \r\n    | where type=='microsoft.resources/subscriptions' \r\n    | project subscriptionName=name, subscriptionId\r\n) on subscriptionId\r\n| where type =~ 'Microsoft.Network/virtualNetworks'\r\n| extend addressPrefixes=array_length(properties.addressSpace.addressPrefixes)\r\n| extend vNetAddressSpace=properties.addressSpace.addressPrefixes\r\n| mv-expand subnet=properties.subnets\r\n| extend virtualNetwork = name\r\n| extend subnetPrefix = subnet.properties.addressPrefix\r\n| extend subnets = properties.subnets\r\n| extend subnetName = tostring(subnet.name)\r\n| extend prefixLength = toint(split(subnetPrefix, \"/\")[1])\r\n| extend addressPrefix = split(subnetPrefix, \"/\")[0]\r\n| extend numberOfIpAddresses = trim_end(\".0\",tostring(pow(2, 32 - prefixLength) - 5))\r\n| extend startIp = strcat(strcat_array((array_slice(split(addressPrefix, '.'), 0, 2)),\".\"), \".\", tostring(0))\r\n| extend endIp = strcat(strcat_array((array_slice(split(addressPrefix, '.'), 0, 2)),\".\"), \".\", trim_end(\".0\",tostring(pow(2, 32 - prefixLength) - 5)))\r\n| extend endIPNew = case(prefixLength == 23, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'1.255'),\r\n    prefixLength == 22, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'3.255'),\r\n    prefixLength == 21, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'7.255'),\r\n    prefixLength == 20, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'15.255'),\r\n    prefixLength == 19, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'31.255'),\r\n    prefixLength == 18, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'63.255'),\r\n    prefixLength == 17, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'127.255'),\r\n    prefixLength == 16, strcat(strcat(strcat_array((array_slice(split(startIp,'.'), 0, 1)), \".\"), \".\"),'255.255'),\r\n    'unknown'\r\n)\r\n| extend finalendIPaddress = iff(endIPNew == \"unknown\", endIp, endIPNew) \r\n| join kind=leftouter (\r\n    // Number of connected devices per VNet and Subnet\r\n    resources\r\n    | join kind=leftouter(\r\n        resourcecontainers \r\n        | where type=='microsoft.resources/subscriptions' \r\n        | project subscriptionName=name, subscriptionId\r\n    ) on subscriptionId\r\n    | where type =~ 'microsoft.network/networkinterfaces'\r\n    | project id, ipConfigurations = properties.ipConfigurations, virtualMachine = tostring(split(properties.virtualMachine.id,\"/\",8)[0]), subscriptionId\r\n    | mvexpand ipConfigurations\r\n    | project id, subnetId = tostring(ipConfigurations.properties.subnet.id), subscriptionId, virtualMachine\r\n    | parse kind=regex subnetId with '/virtualNetworks/' virtualNetwork '/subnets/' subnet\r\n    | extend resourceGroup = tostring(split(subnetId,\"/\",4)[0])\r\n    | extend subnetName = subnet\r\n    | summarize usedIPAddresses = count() by subnetName, virtualNetwork, subscriptionId\r\n)\r\non subnetName, virtualNetwork, subscriptionId\r\n| extend usedIPAddresses_new = iff(isnull(usedIPAddresses),0,usedIPAddresses)\r\n| project subscriptionId, resourceGroup, virtualNetwork, SubnetName = subnet.name, IPRange = strcat(startIp, \" - \", finalendIPaddress), numberOfIpAddresses, usedIPAddresses, AvailableIPAddresses = (toint(numberOfIpAddresses) - usedIPAddresses_new)",
        "size": 0,
        "title": "IP Inventory",
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 15,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "Subscription",
              "formatter": 15,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "resourceGroup",
              "formatter": 5
            },
            {
              "columnMatch": "Group",
              "formatter": 15,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "subscriptionName",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "resourceGroup"
          },
          "labelSettings": [
            {
              "columnId": "subscriptionId",
              "label": "Subscription"
            }
          ]
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "network"
        },
        {
          "parameterName": "network",
          "comparison": "isEqualTo",
          "value": "ipinventory"
        }
      ],
      "name": "query - IP Inventory"
    },
    {
      "type": 1,
      "content": {
        "json": "## End Networking\r\n\r\n\r\n## Begin Monitoring & Security"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - End Networking"
    },
    {
      "type": 1,
      "content": {
        "json": "## Monitor & Security  \r\n   \r\n   \r\n   \r\n### Workspaces Overview"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "monitor"
      },
      "name": "text - Monitor & Security"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources \r\n| where type =~ 'microsoft.operationalinsights/workspaces'\r\nor type =~ 'microsoft.insights/components'\r\n| summarize count() by type",
        "size": 4,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Solutions",
              "formatter": 5
            },
            {
              "columnMatch": "AzureSecurityCenter",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureSecurityCenterFree",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureSentinel",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureMonitorVMs",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "ServiceDesk",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureAutomation",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "ChangeTracking",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "UpdateManagement",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "UpdateCompliance",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureMonitorContainers",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "KeyVaultAnalytics",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "SQLHealthCheck",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            }
          ]
        },
        "sortBy": [],
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 16,
            "formatOptions": {
              "showIcon": true
            }
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "monitor"
      },
      "name": "query - Monitoring Security Overview - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "### Azure Monitor Workbooks & Alerting Resources"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "monitor"
      },
      "name": "text - Monitor & Security - Azure Monitor Alerts"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.insights/'\r\n     or type has 'microsoft.alertsmanagement/smartdetectoralertrules'\r\n     or type has 'microsoft.portal/dashboards'\r\n| where type != 'microsoft.insights/components'\r\n| extend type = case(\r\n \ttype == 'microsoft.insights/workbooks', \"Workbooks\",\r\n\ttype == 'microsoft.insights/activitylogalerts', \"Activity Log Alerts\",\r\n\ttype == 'microsoft.insights/scheduledqueryrules', \"Log Search Alerts\",\r\n\ttype == 'microsoft.insights/actiongroups', \"Action Groups\",\r\n\ttype == 'microsoft.insights/metricalerts', \"Metric Alerts\",\r\n\ttype =~ 'microsoft.alertsmanagement/smartdetectoralertrules','Smart Detection Rules',\r\n    type =~ 'microsoft.insights/webtests', 'URL Web Tests',\r\n    type =~ 'microsoft.portal/dashboards', 'Portal Dashboards',\r\n    type =~ 'microsoft.insights/datacollectionrules', 'Data Collection Rules',\r\n    type =~ 'microsoft.insights/autoscalesettings', 'Auto Scale Settings',\r\n    type =~ 'microsoft.insights/alertrules', 'Alert Rules',\r\n    type =~ 'microsoft.insights/datacollectionendpoints', 'Data Collection Endpoints',\r\nstrcat(\"Not Translated: \", type))\r\n| summarize count() by type",
        "size": 1,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "visualization": "tiles",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Solutions",
              "formatter": 5
            },
            {
              "columnMatch": "AzureSecurityCenter",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureSecurityCenterFree",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureSentinel",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureMonitorVMs",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "ServiceDesk",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureAutomation",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "ChangeTracking",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "UpdateManagement",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "UpdateCompliance",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureMonitorContainers",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "KeyVaultAnalytics",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "SQLHealthCheck",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            }
          ]
        },
        "sortBy": [],
        "tileSettings": {
          "titleContent": {
            "columnMatch": "type",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "count_",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "maximumSignificantDigits": 3,
                "maximumFractionDigits": 2
              }
            }
          },
          "showBorder": true,
          "sortCriteriaField": "count_",
          "sortOrderField": 2
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "monitor"
      },
      "name": "query - Monitoring Security Overview - Copy"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "ed3b3650-dd46-4a66-9acd-cbda10b14c04",
            "cellValue": "monitor",
            "linkTarget": "parameter",
            "linkLabel": "Active Alerts",
            "subTarget": "alerts",
            "preText": "Active Alerts",
            "style": "link"
          },
          {
            "id": "9224d88a-9c0d-49de-8b24-38b3f8c380d3",
            "cellValue": "monitor",
            "linkTarget": "parameter",
            "linkLabel": "Workbooks & Alerting Resources",
            "subTarget": "alertresources",
            "preText": "Monitor Resources",
            "style": "link"
          },
          {
            "id": "b90eaf7d-647e-4b37-ae0a-6fc6a49ce07c",
            "cellValue": "monitor",
            "linkTarget": "parameter",
            "linkLabel": "App Monitoring",
            "subTarget": "apm",
            "preText": "App Monitoring",
            "style": "link"
          },
          {
            "id": "1b181560-7b87-4f30-886c-2054a3648401",
            "cellValue": "monitor",
            "linkTarget": "parameter",
            "linkLabel": "Log Analytics",
            "subTarget": "loganalytics",
            "preText": "Log Analytics",
            "style": "link"
          },
          {
            "id": "d19b8a04-9a79-40ca-90a6-7ebc1be7fe75",
            "cellValue": "monitor",
            "linkTarget": "parameter",
            "linkLabel": "Security Score",
            "subTarget": "security",
            "preText": "Security Score",
            "style": "link"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "monitor"
      },
      "name": "links - Monitor & Security - Tabs"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin - Monitor & Security - Active Alerts"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - Begin Active Alerts"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "AlertsManagementResources\r\n| extend AlertStatus = properties.essentials.monitorCondition\r\n| extend AlertState = properties.essentials.alertState\r\n| extend AlertTime = properties.essentials.startDateTime\r\n| extend AlertSuppressed = properties.essentials.actionStatus.isSuppressed\r\n| extend Severity = properties.essentials.severity\r\n| where AlertStatus == 'Fired'\r\n| extend Details = pack_all()\r\n| project id, name, subscriptionId, resourceGroup, AlertStatus, AlertState, AlertTime, AlertSuppressed, Severity, Details",
        "size": 2,
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "name",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "name"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "alerts"
        }
      ],
      "name": "query - Monitor & Security - Active Alerts"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End - Monitor & Security - Active Alerts"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - End Active Alerts"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin Monitor & Security - Alerting Resources"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - Begin Alerting Resources"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type has 'microsoft.insights/'\r\n     or type has 'microsoft.alertsmanagement/smartdetectoralertrules'\r\n    or type has 'microsoft.portal/dashboards'\r\n| where type != 'microsoft.insights/components'\r\n| extend type = case(\r\n \ttype == 'microsoft.insights/workbooks', \"Workbooks\",\r\n\ttype == 'microsoft.insights/activitylogalerts', \"Activity Log Alerts\",\r\n\ttype == 'microsoft.insights/scheduledqueryrules', \"Log Search Alerts\",\r\n\ttype == 'microsoft.insights/actiongroups', \"Action Groups\",\r\n\ttype == 'microsoft.insights/metricalerts', \"Metric Alerts\",\r\n\ttype =~ 'microsoft.alertsmanagement/smartdetectoralertrules','Smart Detection Rules',\r\n    type =~ 'microsoft.portal/dashboards', 'Portal Dashboards',\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend Enabled = case(\r\n\ttype =~ 'Smart Detection Rules', properties.state,\r\n\ttype != 'Smart Detection Rules', properties.enabled,\r\n\tstrcat(\"Not Translated: \", type))\r\n| extend WorkbookType = iif(type =~ 'Workbooks', properties.category, ' ')\r\n| extend Details = pack_all()\r\n| project name, type, subscriptionId, location, resourceGroup, Enabled, WorkbookType, Details",
        "size": 2,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "name",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            }
          ],
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "name"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "alertresources"
        }
      ],
      "name": "query - Monitor & Security - Alerting Resources"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End - Monitor & Security - Alerting Resources"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - End Alerting Resources"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin - Monitor & Security - App Monitoring"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - Begin App Monitoring"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "where type =~ 'microsoft.insights/components'\r\n| extend RetentionInDays = properties.RetentionInDays\r\n| extend IngestionMode = properties.IngestionMode\r\n| extend Details = pack_all()\r\n| project Resource=id, location, resourceGroup, subscriptionId, IngestionMode, RetentionInDays, Details",
        "size": 2,
        "exportedParameters": [
          {
            "fieldName": "Resource",
            "parameterName": "appinsight",
            "parameterType": 5
          }
        ],
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Resource",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            },
            {
              "columnMatch": "id",
              "formatter": 5
            },
            {
              "columnMatch": "name",
              "formatter": 5
            }
          ],
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Resource"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "apm"
        }
      ],
      "name": "query - Monitor & Security - App Monitoring"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End - Monitor & Security - App Monitoring"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - End App Monitoring"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin - Monitor & Security - Log Analytics"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - Begin - App Monitoring"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "where type =~ 'microsoft.operationalinsights/workspaces'\r\n| extend Sku = properties.sku.name\r\n| extend RetentionInDays = properties.retentionInDays\r\n| extend Details = pack_all()\r\n| project Workspace=id, resourceGroup, location, subscriptionId, Sku, RetentionInDays, Details",
        "size": 0,
        "exportedParameters": [
          {
            "fieldName": "workspace",
            "parameterName": "workspace",
            "parameterType": 5
          }
        ],
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Workspace",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Details",
              "formatter": 7,
              "formatOptions": {
                "linkTarget": "CellDetails",
                "linkLabel": "üîç View Details",
                "linkIsContextBlade": true
              }
            }
          ],
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Workspace"
          }
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "loganalytics"
        }
      ],
      "name": "query - Monitoring Security Overview - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "### Log Analytics workspaces with enabled Solutions\r\n\r\nüí° Select workspace to see data tables and resources logging to that workspace\r\n"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "loganalytics"
        }
      ],
      "name": "text - Monitor & Security - workspace details"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type == \"microsoft.operationsmanagement/solutions\"\r\n| project Solution=plan.name, Workspace=tolower(tostring(properties.workspaceResourceId)), subscriptionId\r\n\t| join kind=leftouter(\r\n\t\tresources\r\n\t\t| where type =~ 'microsoft.operationalinsights/workspaces'\r\n\t\t| project Workspace=tolower(tostring(id)),subscriptionId) on Workspace\r\n| summarize Solutions = strcat_array(make_list(Solution), \",\") by Workspace, subscriptionId\r\n| extend AzureSecurityCenter = iif(Solutions has 'Security','Enabled','Not Enabled')\r\n| extend AzureSecurityCenterFree = iif(Solutions has 'SecurityCenterFree','Enabled','Not Enabled')\r\n| extend AzureSentinel = iif(Solutions has \"SecurityInsights\",'Enabled','Not Enabled')\r\n| extend AzureMonitorVMs = iif(Solutions has \"VMInsights\",'Enabled','Not Enabled')\r\n| extend ServiceDesk = iif(Solutions has \"ITSM Connector\",'Enabled','Not Enabled')\r\n| extend AzureAutomation = iif(Solutions has \"AzureAutomation\",'Enabled','Not Enabled')\r\n| extend ChangeTracking = iif(Solutions has 'ChangeTracking','Enabled','Not Enabled')\r\n| extend UpdateManagement = iif(Solutions has 'Updates','Enabled','Not Enabled')\r\n| extend UpdateCompliance = iif(Solutions has 'WaaSUpdateInsights','Enabled','Not Enabled')\r\n| extend AzureMonitorContainers = iif(Solutions has 'ContainerInsights','Enabled','Not Enabled')\r\n| extend KeyVaultAnalytics = iif(Solutions has 'KeyVaultAnalytics','Enabled','Not Enabled')\r\n| extend SQLHealthCheck = iif(Solutions has 'SQLAssessment','Enabled','Not Enabled')",
        "size": 0,
        "exportedParameters": [
          {
            "fieldName": "Workspace",
            "parameterName": "workspace",
            "parameterType": 5
          }
        ],
        "showExportToExcel": true,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource",
                "showIcon": true
              }
            },
            {
              "columnMatch": "Workspace",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "Solutions",
              "formatter": 5
            },
            {
              "columnMatch": "AzureSecurityCenter",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureSecurityCenterFree",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureSentinel",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureMonitorVMs",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "ServiceDesk",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureAutomation",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "ChangeTracking",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "UpdateManagement",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "UpdateCompliance",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "AzureMonitorContainers",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "KeyVaultAnalytics",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            },
            {
              "columnMatch": "SQLHealthCheck",
              "formatter": 18,
              "formatOptions": {
                "thresholdsOptions": "icons",
                "thresholdsGrid": [
                  {
                    "operator": "==",
                    "thresholdValue": "Not Enabled",
                    "representation": "disabled",
                    "text": "{0}{1}"
                  },
                  {
                    "operator": "Default",
                    "thresholdValue": null,
                    "representation": "Available",
                    "text": "{0}{1}"
                  }
                ]
              }
            }
          ],
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "Workspace"
          }
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "loganalytics"
        }
      ],
      "name": "query - Monitoring Security Overview"
    },
    {
      "type": 1,
      "content": {
        "json": "\r\n\r\nüí° Workspace table usage for selected workspace on the left, resources reported to selected workspace on the right."
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "loganalytics"
        }
      ],
      "name": "text - Monitor & Security - workspace table usage"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Usage\r\n| summarize Size = sum(Quantity) by ['Table Name'] = DataType\r\n| sort by Size desc",
        "size": 2,
        "noDataMessageStyle": 5,
        "timeContext": {
          "durationMs": 86400000
        },
        "exportedParameters": [
          {
            "fieldName": "workspace",
            "parameterName": "workspace",
            "parameterType": 5
          }
        ],
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{workspace}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Size",
              "formatter": 3,
              "formatOptions": {
                "palette": "orange",
                "customColumnWidthSetting": "341px"
              },
              "numberFormat": {
                "unit": 38,
                "options": {
                  "style": "decimal"
                }
              }
            }
          ],
          "rowLimit": 500,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "loganalytics"
        }
      ],
      "customWidth": "50",
      "name": "query - Monitoring Security - Workspace Usage - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "search * | distinct _ResourceId, SubscriptionId",
        "size": 2,
        "noDataMessageStyle": 5,
        "timeContext": {
          "durationMs": 86400000
        },
        "exportedParameters": [
          {
            "fieldName": "workspace",
            "parameterName": "workspace",
            "parameterType": 5
          }
        ],
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{workspace}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "_ResourceId",
              "formatter": 5
            },
            {
              "columnMatch": "SubscriptionId",
              "formatter": 5
            }
          ],
          "rowLimit": 500,
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "SubscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "_ResourceId"
          }
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "loganalytics"
        }
      ],
      "customWidth": "50",
      "name": "query - Monitoring Security - Workspace Usage"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End - Monitor & Security - Log Analytics"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - End - App Monitoring"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin - Monitor & Security - Security"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - Begin - App Monitoring - Security"
    },
    {
      "type": 1,
      "content": {
        "json": "### Azure Security Center Secure Store by Subscription"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "security"
        }
      ],
      "name": "text - Monitor & Security - Secure Score Text"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "securityresources\r\n| where type == \"microsoft.security/securescores\"\r\n| extend subscriptionSecureScore = round(100 * bin((todouble(properties.score.current))/ todouble(properties.score.max), 0.001))\r\n| where subscriptionSecureScore > 0\r\n| project subscriptionSecureScore, subscriptionId\r\n| order by subscriptionSecureScore asc",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true
              }
            },
            {
              "columnMatch": "subscriptionSecureScore",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 100,
                "palette": "redGreen"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "decimal",
                  "useGrouping": false
                }
              }
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "subscriptionSecureScore"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "security"
        }
      ],
      "name": "query - Monitor & Security - Security Scores"
    },
    {
      "type": 1,
      "content": {
        "json": "### Azure Security Center Secure Controls Score by Controls\r\n\r\nlists all security controls, the amount of unhealthy resources, their current score and their max score"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "security"
        }
      ],
      "name": "text - Monitor & Security - Secure Score Text - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "SecurityResources \r\n| where type == 'microsoft.security/securescores/securescorecontrols' \r\n| extend SecureControl = properties.displayName, unhealthy = properties.unhealthyResourceCount, currentscore = properties.score.current, maxscore = properties.score.max, subscriptionId\r\n| project SecureControl , unhealthy, currentscore, maxscore, subscriptionId",
        "size": 3,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{Subscriptions}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "$gen_group",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": null,
                "showIcon": true,
                "customColumnWidthSetting": "45ch"
              }
            },
            {
              "columnMatch": "SecureControl",
              "formatter": 5
            },
            {
              "columnMatch": "unhealthy",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "palette": "greenRed"
              }
            },
            {
              "columnMatch": "currentscore",
              "formatter": 8,
              "formatOptions": {
                "palette": "redGreen"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "decimal"
                }
              }
            },
            {
              "columnMatch": "maxscore",
              "formatter": 8,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "subscriptionId",
              "formatter": 5
            },
            {
              "columnMatch": "subscriptionSecureScore",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 100,
                "palette": "redGreen"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "decimal",
                  "useGrouping": false
                }
              }
            }
          ],
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "subscriptionId"
            ],
            "expandTopLevel": true,
            "finalBy": "SecureControl"
          }
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "monitor"
        },
        {
          "parameterName": "monitor",
          "comparison": "isEqualTo",
          "value": "security"
        }
      ],
      "name": "query - Monitor & Security - Security Scores - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - End - Monitor & Security - Security"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - End - App Monitoring - Security - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "### NoShow - Begin - Governance"
      },
      "conditionalVisibility": {
        "parameterName": "noshow",
        "comparison": "isEqualTo",
        "value": "noshow"
      },
      "name": "text - NoShow - End - App Monitoring - Security - Copy - Copy"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "# Governance\r\n\r\nSummary and inventory of Policy data and tagging data.\r\n\r\n*Note: RBAC and Azure AD data are not available in Azure Resource Graph* "
            },
            "name": "text - 3"
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "tabs",
              "links": [
                {
                  "id": "a3827935-8289-4826-84ae-4a1d5e6a555e",
                  "cellValue": "governance",
                  "linkTarget": "parameter",
                  "linkLabel": "Policy",
                  "subTarget": "policy",
                  "style": "link"
                },
                {
                  "id": "9cc30d56-db75-4588-abcd-c6e468adfc8e",
                  "cellValue": "governance",
                  "linkTarget": "parameter",
                  "linkLabel": "Tagging",
                  "subTarget": "tagging",
                  "style": "link"
                }
              ]
            },
            "name": "links - 0"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "### Total Count of Assignments, Compliant Resources, Non Compliant Resources and unique counts of Policies and Initiatives deployed."
                  },
                  "name": "text - 2"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "policyresources\r\n| where type =~ 'microsoft.policyinsights/policystates'\r\n| extend AssignmentName = tostring(properties.policyAssignmentName), Initiative = tostring(properties.policySetDefinitionId), \r\n         PolicyDefintion = tostring(properties.policyDefinitionId), Compliance = tostring(properties.complianceState),\r\n         DefinitionReferrence = tostring(properties.policyDefinitionReferenceId), DefinitionCategory = tostring(properties.policySetDefinitionCategory),\r\n         Scope = tostring(properties.policyAssignmentScope), PolicyAction = tostring(properties.policyDefinitionAction),\r\n         ResourceType = tostring(properties.resourceType)\r\n| summarize Assignments = count(AssignmentName), \r\n            [\"Initiatives Deployed\"] = dcountif(Initiative, isnotnull(Initiative)), \r\n            [\"Policies Deployed\"] = dcountif(PolicyDefintion, isempty(Initiative)),\r\n            [\"Compliant Resources\"] = countif(Compliance == 'Compliant'),\r\n            [\"Non Compliant Resources\"] = countif(Compliance != 'Compliant')\r\n| extend Chart = pack_all()\r\n| project Chart\r\n| mv-expand bagexpansion = array Chart\r\n| project tostring(name = Chart[0]), todouble(val = Chart[1])",
                    "size": 4,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {
                        "columnMatch": "name"
                      },
                      "leftContent": {
                        "columnMatch": "val",
                        "formatter": 12,
                        "formatOptions": {
                          "palette": "auto"
                        }
                      },
                      "showBorder": true,
                      "sortCriteriaField": "val",
                      "sortOrderField": 2
                    }
                  },
                  "name": "query - 1"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "policyresources\r\n| where type =~ 'microsoft.policyinsights/policystates'\r\n| extend AssignmentName = tostring(properties.policyAssignmentName), Initiative = tostring(properties.policySetDefinitionId), \r\n         PolicyDefintion = tostring(properties.policyDefinitionId), Compliance = tostring(properties.complianceState),\r\n         DefinitionReferrence = tostring(properties.policyDefinitionReferenceId), DefinitionCategory = tostring(properties.policySetDefinitionCategory),\r\n         Scope = tostring(properties.policyAssignmentScope), PolicyAction = tostring(properties.policyDefinitionAction),\r\n         ResourceType = tostring(properties.resourceType)\r\n| summarize Assignments = count(AssignmentName), \r\n            [\"Initiatives Deployed\"] = dcountif(Initiative, isnotnull(Initiative)), \r\n            [\"Policies Deployed\"] = dcountif(PolicyDefintion, isempty(Initiative)) by subscriptionId\r\n| order by ['Assignments'] desc",
                    "size": 0,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ],
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "$gen_group",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": null,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "Group",
                          "formatter": 13,
                          "formatOptions": {
                            "linkTarget": null,
                            "showIcon": true
                          }
                        },
                        {
                          "columnMatch": "subscriptionId",
                          "formatter": 5
                        }
                      ],
                      "hierarchySettings": {
                        "treeType": 1,
                        "groupBy": [
                          "subscriptionId"
                        ],
                        "expandTopLevel": true
                      }
                    }
                  },
                  "name": "query - 4"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "governance",
              "comparison": "isEqualTo",
              "value": "policy"
            },
            "name": "group - Governance - Policy"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources \r\n| where isnotempty(tags)\r\n| where tags !has \"hidden-\"\r\n| mv-expand tags\r\n| extend tagName = tostring(bag_keys(tags)[0])\r\n| extend tagValue = tostring(tags[tagName])\r\n| summarize count() by tagName, tagValue",
                    "size": 0,
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscriptions}"
                    ]
                  },
                  "name": "query - 0"
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "governance",
              "comparison": "isEqualTo",
              "value": "tagging"
            },
            "name": "group - Governance - Tagging"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "governance"
      },
      "name": "group - Governance"
    }
  ],
  "fallbackResourceIds": [
    "Azure Monitor"
  ],
  "fromTemplateId": "community-Workbooks/byork/AzureInventory",
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
